name : test job
on: [push]
jobs :
    Build :
      runs-on : ubuntu-latest
      steps:  
      - uses: actions/checkout@v2
       
      - uses: actions/upload-artifact@v2
        with:
         name: BuildArtifacts
         path: ./
     

   
    deploy:
      runs-on : ubuntu-latest
      steps:
       - name: Azure Login
         uses: Azure/login@v1
         with:
          creds: ${{ secrets.AZURE_CREDENTIALS }}
          allow-no-subscriptions: true
          enable-AzPSSession: true
          
       - name: checkout source code
         uses: actions/checkout@v2
         
       - name: Download a Build Artifact
         uses: actions/download-artifact@v2.0.10
         with:
           name: BuildArtifacts 
           
       - name : Remove RG Locks
         uses: Azure/powershell@v1
         with :
          inlineScript: |
            Scripts/removeResourceLocks.ps1 `
               -resourceGroupList "githubactions" `
               -subscriptionId ${{ secrets.SUB_IDEN_ID }} `
               -skipTags
          azPSVersion: latest
         
       
      
      
